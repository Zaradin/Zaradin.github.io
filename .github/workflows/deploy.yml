name: Build and deploy Jekyll site to GitHub Pages

on:
    push:
        branches:
            - master
    schedule:
        - cron: "0 0 * * *"

jobs:
    github-pages:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v3 # Update to latest version
            - uses: actions/cache@v3 # Update to latest version
              with:
                  path: vendor/bundle
                  key: ${{ runner.os }}-gems-${{ hashFiles('**/Gemfile') }}
                  restore-keys: |
                      ${{ runner.os }}-gems-
            - uses: helaili/jekyll-action@2.4.0
              with:
                  token: ${{ secrets.GH_PAT }}
                  target_branch: "gh-pages"
              env:
                  JEKYLL_PAT: ${{ secrets.GH_PAT }}
